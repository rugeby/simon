{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/liruge/Desktop/simon/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _toConsumableArray from\"/Users/liruge/Desktop/simon/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/liruge/Desktop/simon/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{GameEvent,GameNotifier}from'./gameNotifier';import'./players.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function Players(props){var userName=props.userName;var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),events=_React$useState2[0],setEvent=_React$useState2[1];React.useEffect(function(){GameNotifier.addHandler(handleGameEvent);return function(){GameNotifier.removeHandler(handleGameEvent);};});function handleGameEvent(event){setEvent([].concat(_toConsumableArray(events),[event]));}function createMessageArray(){var messageArray=[];var _iterator=_createForOfIteratorHelper(events.entries()),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var _step$value=_slicedToArray(_step.value,2),i=_step$value[0],event=_step$value[1];var message='unknown';if(event.type===GameEvent.End){message=\"scored \".concat(event.value.score);}else if(event.type===GameEvent.Start){message=\"started a new game\";}else if(event.type===GameEvent.System){message=event.value.msg;}messageArray.push(/*#__PURE__*/_jsxs(\"div\",{className:\"event\",children:[/*#__PURE__*/_jsx(\"span\",{className:'player-event',children:event.from.split('@')[0]}),message]},i));}}catch(err){_iterator.e(err);}finally{_iterator.f();}return messageArray;}return/*#__PURE__*/_jsxs(\"div\",{className:\"players\",children:[\"Player\",/*#__PURE__*/_jsx(\"span\",{className:\"player-name\",children:userName}),/*#__PURE__*/_jsx(\"div\",{id:\"player-messages\",children:createMessageArray()})]});}","map":{"version":3,"names":["React","GameEvent","GameNotifier","Players","props","userName","useState","events","setEvent","useEffect","addHandler","handleGameEvent","removeHandler","event","createMessageArray","messageArray","entries","i","message","type","End","value","score","Start","System","msg","push","from","split"],"sources":["/Users/liruge/Desktop/simon/src/play/players.jsx"],"sourcesContent":["import React from 'react';\n\nimport { GameEvent, GameNotifier } from './gameNotifier';\nimport './players.css';\n\nexport function Players(props) {\n  const userName = props.userName;\n\n  const [events, setEvent] = React.useState([]);\n\n  React.useEffect(() => {\n    GameNotifier.addHandler(handleGameEvent);\n\n    return () => {\n      GameNotifier.removeHandler(handleGameEvent);\n    };\n  });\n\n  function handleGameEvent(event) {\n    setEvent([...events, event]);\n  }\n\n  function createMessageArray() {\n    const messageArray = [];\n    for (const [i, event] of events.entries()) {\n      let message = 'unknown';\n      if (event.type === GameEvent.End) {\n        message = `scored ${event.value.score}`;\n      } else if (event.type === GameEvent.Start) {\n        message = `started a new game`;\n      } else if (event.type === GameEvent.System) {\n        message = event.value.msg;\n      }\n\n      messageArray.push(\n        <div key={i} className='event'>\n          <span className={'player-event'}>{event.from.split('@')[0]}</span>\n          {message}\n        </div>\n      );\n    }\n    return messageArray;\n  }\n\n  return (\n    <div className='players'>\n      Player\n      <span className='player-name'>{userName}</span>\n      <div id='player-messages'>{createMessageArray()}</div>\n    </div>\n  );\n}\n"],"mappings":"mXAAA,MAAOA,MAAK,KAAM,OAAO,CAEzB,OAASC,SAAS,CAAEC,YAAY,KAAQ,gBAAgB,CACxD,MAAO,eAAe,CAAC,wFAEvB,MAAO,SAASC,QAAO,CAACC,KAAK,CAAE,CAC7B,GAAMC,SAAQ,CAAGD,KAAK,CAACC,QAAQ,CAE/B,oBAA2BL,KAAK,CAACM,QAAQ,CAAC,EAAE,CAAC,oDAAtCC,MAAM,qBAAEC,QAAQ,qBAEvBR,KAAK,CAACS,SAAS,CAAC,UAAM,CACpBP,YAAY,CAACQ,UAAU,CAACC,eAAe,CAAC,CAExC,MAAO,WAAM,CACXT,YAAY,CAACU,aAAa,CAACD,eAAe,CAAC,CAC7C,CAAC,CACH,CAAC,CAAC,CAEF,QAASA,gBAAe,CAACE,KAAK,CAAE,CAC9BL,QAAQ,8BAAKD,MAAM,GAAEM,KAAK,GAAE,CAC9B,CAEA,QAASC,mBAAkB,EAAG,CAC5B,GAAMC,aAAY,CAAG,EAAE,CAAC,yCACCR,MAAM,CAACS,OAAO,EAAE,YAAzC,+CAA2C,+CAA/BC,CAAC,gBAAEJ,KAAK,gBAClB,GAAIK,QAAO,CAAG,SAAS,CACvB,GAAIL,KAAK,CAACM,IAAI,GAAKlB,SAAS,CAACmB,GAAG,CAAE,CAChCF,OAAO,kBAAaL,KAAK,CAACQ,KAAK,CAACC,KAAK,CAAE,CACzC,CAAC,IAAM,IAAIT,KAAK,CAACM,IAAI,GAAKlB,SAAS,CAACsB,KAAK,CAAE,CACzCL,OAAO,qBAAuB,CAChC,CAAC,IAAM,IAAIL,KAAK,CAACM,IAAI,GAAKlB,SAAS,CAACuB,MAAM,CAAE,CAC1CN,OAAO,CAAGL,KAAK,CAACQ,KAAK,CAACI,GAAG,CAC3B,CAEAV,YAAY,CAACW,IAAI,cACf,aAAa,SAAS,CAAC,OAAO,wBAC5B,aAAM,SAAS,CAAE,cAAe,UAAEb,KAAK,CAACc,IAAI,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAQ,CACjEV,OAAO,GAFAD,CAAC,CAGL,CACP,CACH,CAAC,qDACD,MAAOF,aAAY,CACrB,CAEA,mBACE,aAAK,SAAS,CAAC,SAAS,iCAEtB,aAAM,SAAS,CAAC,aAAa,UAAEV,QAAQ,EAAQ,cAC/C,YAAK,EAAE,CAAC,iBAAiB,UAAES,kBAAkB,EAAE,EAAO,GAClD,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}